<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta http-equiv="Content-Type" content="text/htmlcharset=UTF-8" />
    <meta http-equiv="x-ua-compatible" content="ie=8" />
    <meta name="renderer" content="webkit" />
    <meta name="WT.page_name" content="index" />
    <meta content="zh-cn" http-equiv="content-language" />
    <meta name="SmartView_Page" content="1" />
    <meta http-equiv="Cache-Control" content="no-transform " />
    <meta http-equiv="Cache-Control" content="no-siteapp"/>
    <title>汇福-购物车</title>
    <link type="text/css" rel="stylesheet" href="./css/reset.css">
    <link type="text/css" rel="stylesheet" href="./css/hf_header-footer.css">
    <link type="text/css" rel="stylesheet" href="./css/ch_shopping-cart.css">
    <link href="./images/logo.ico" rel="shortcut icon" type="image/x-icon" />
    <script type="text/javascript" src="js/jquery1.8.3.min.js"></script>
    <script type="text/javascript" src="js/hf-header_footer.js"></script>
    <script type="text/javascript" src="js/common.js"></script>

</head>
<body>
    <!-- 头部 -->
    <div id="new_header"></div>
    <!-- 头部end -->
    <!-- 主体 -->
   <div class="well  clearfix">

        <div class="shoppCart ">
            <p class="body_title">我的收藏</p>

            <div class="collect">
                    <table  class="table_collect" >
                        <tr class="collect_tr">
                            <th width="293">商品信息</th>
                            <th width="155">尺寸信息</th>
                            <th width="200">价格</th>                            
                            <th width="187">数量</th>
                            <th width="200">价格</th>
                            <th width="145">操作</th>
                        </tr>
                        <tr class="per_center pric_each">
                            <td >
                               <img src="./images/01.png" width="106" height="106" class="collet_img" />
                               <span class="collect_info">18K金钻石手镯Dream系列Dear</span>
                            </td>
                            <td >18</td>
                            <td >￥<span class="totle">17000.00</span></td>                            
                            <td >￥-<span class="favo">20<span></td>
                            <td ><em class="collect_price">￥<span class="unit">17000.00</span></em></td>
                            <td >
                               <a href="javascrpit:void(0)" class="adress_btn1">收藏</a>
                               <a  onclick="removedell(this)" class="collect_dell">删除</a>
                            </td>                               
                        </tr>
                        <tr class="per_center pric_each">
                            <td >
                               <img src="./images/01.png" width="106" height="106" class="collet_img" />
                               <span class="collect_info">18K金钻石手镯Dream系列Dear</span>
                               </td>
                            <td >18</td>
                            <td >￥<span class="totle">17000.00</span></td>                            
                            <td >￥-<span class="favo">10<span></td>
                            <td ><em class="collect_price">￥<span class="unit">17000.00</span></em></td>
                            <td >
                               <a  class="adress_btn1">收藏</a>
                               <a  onclick="removedell(this)" class="dell_bnt">删除</a>
                            </td>                               
                        </tr>
                        <tr class="per_center ">
                            <td colspan="3" class="collect_td_last">合计</td>
                            <td>￥-<span id="favo_sum">0</span></td>
                            <td><em class="collect_price">￥<span id="price_sum">0</span></em></td>
                            <td>&nbsp;</td>
                            
                        </tr>
                        <tr class="shoppCart_td">
                            <td colspan="4" class="shopp_td_last">
                               <a  href="javascrpit:void(0)" class="collect_dell">清空购物车</a>
                            </td>
                            <td class="shopp_td02">订单总额 ￥<span id="susum">0</span></td>
                            <td class="shopp_td02">本次应付 <em class="collect_price">￥<span id="common_sum">0</span></em></td>
                            
                        </tr>
                         <tr class="per_center">
                             <td colspan="6" class="td_btn">
                                 <a href="#" class="shopp_bnt" onclick="buy(this)">立即结算</a>
                             </td>
                         </tr>

    
                    </table>
                    <!-- 收藏成功 -->
                    <div class="collect_success">
                        <div class="shopp_coll">
                            <p class="pass_set">收藏成功！</p>
                        </div>
                    </div>
                    <!-- 收藏成功 -->
                    <!-- 注：收藏为空内容 -->
                      <p class="collect_kong">您的收藏夹为空，赶紧添加您喜爱的商品吧<br/>
                        <a href="hf_product-classify.html" class="collect_add">添加商品</a>
                     </p>
                    <!-- 注：收藏为空内容  end -->

            </div>
         </div>                               
    </div>
    <!-- 删除全部收藏提示框 -->
    <div class="dell_all">
       <div class="shopp_dell">
            <p class="hint">确定要删除购物车中的所有商品吗？</p>
            <div class="btn_box">
                <a href="javascrpit:void(0)" class="dell_btn">确定</a>
                <a href="javascrpit:void(0)" class="dell_cancel">取消</a>

            </div>
        </div> 
    </div>

    <!-- 删除全部收藏提示框 -->

  <!-- 底部 -->
  <div id="footer"></div>
  <!-- 底部  end-->
    <!-- 右边固定栏 -->
  <div id="izl_rmenu" class="izl_rmenu"></div>

    <!-- 右边固定栏 -->
</body>

<script type="text/javascript">
    //合计
    function aaa(){
        //原价
        var num = 0;
        $('td>.totle').each(function(){
            // console.log($(this).text())
            var num_l = parseFloat($(this).text());
            num = num + num_l;
             num1=(num.toFixed(2));
            $("#susum").text(num1);

        });
        //计算优惠价格
        var num_favo = 0;
        $('td>.favo').each(function(){
            // console.log($(this).text())
            var num_r = parseFloat($(this).text());
            num_favo = num_favo + num_r;
            num_favo1=(num_favo.toFixed(2));
            $("#favo_sum").text(num_favo1);
        });

        //总价减去优惠价格
       
         $('.pric_each').each(function(){
            // console.log($(this))
            // $(this).find('.totle').text();
           var num_a=parseFloat($(this).find('.totle').text());
           var num_b=parseFloat($(this).find('.favo').text());  
         var dangjia = parseFloat(num_a - num_b);
         // console.log(dangjia)
         dangjia1=(dangjia.toFixed(2));
        $(this).find('.unit').text(dangjia1);

        })
        //计算总价
         var num_price = 0;
        $('tr>td>.collect_price .unit').each(function(){
            // console.log($(this).text());
            var num_l = parseFloat($(this).text());
            num_price = num_price + num_l;
            num_price1=(num_price.toFixed(2));
            $("#price_sum").text(num_price1);       
        });
        //应付价格
        var sumsum=0;
        // console.log($(sumsum).text())
         sumsum =sumsum + num_price - num_favo;
         sumsum1=(sumsum.toFixed(2));
       $("#common_sum").text(sumsum1);

    }

    $(function () {
        aaa();
        $('.body_side .ul_nav a').click(function(){
            $(this).parent().addClass('active').siblings('li').removeClass('active');
        });
        // $('.adress_btn2').click(function(){
        //     $(this).parents('.per_center').remove();
        // });
        var WHeight = $(document).height();
        $(".dell_all").height(WHeight-292);

       });
    //收藏成功提示setTimeout
        $('.adress_btn1').click(function(){
            $('.collect_success').css('display','block');

            setTimeout( "text()",1000);
        });

        function text(){
            $('.collect_success').css('display','none')
        }
                 

    //删除收藏
    function removedell(obj){
        $(obj).parents('.per_center').remove();
        if($(".per_center").length == 0) {
           $('.table_collect').children().children().not('.collect_tr').remove();  
        }
    }

    //清空收藏夹
    // function removecollect(obj){
    //     $(obj).parents('.table_collect').children().children().not('.collect_tr').remove();
    // }   
       $(function () {
        $('.collect_dell').click(function(){
            var btn =$(this).index();
            $('.dell_all').css('display','block');

        })
        $('.dell_btn').click(function(){
              $('.table_collect').children().children().not('.collect_tr').remove();
              $('.collect_kong').css('display','block');
              $('.dell_all').css('display','none');
            })
        $('.dell_cancel').click(function(){
            $('.dell_all').css('display','none');
        })

       })  

    
</script>
</html>